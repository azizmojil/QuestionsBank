  {% extends "base.html" %}
  {% load static i18n %}

{% block title %}{% trans "مسار الاعتماد" %}{% endblock %}

  {% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/pipeline.css' %}">
  {% endblock %}

  {% block content %}
  <div class="pipeline-page">
    {% if pipelines %}
      {% for pipeline in pipelines %}
        <div class="card progress-card pipeline-card">
          <div class="pipeline-header">
            <p class="pipeline-eyebrow">{{ pipeline.survey }}</p>
            <h2 class="pipeline-title">{{ pipeline.version_label }}</h2>
          </div>
          <div class="pipeline-wrap" data-pipeline-id="{{ pipeline.id }}">
            <svg class="pipeline-lines" aria-hidden="true"></svg>

            <div class="pipeline-grid">
              <div class="pnode span-rows col1" data-id="version" data-step="1">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "إنشاء الاستبيان" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode lane1 col2" data-id="self" data-step="2">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "التقييم الذاتي" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode lane1 col3" data-id="routing" data-step="3">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "التوجيه" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode lane1 col4" data-id="business" data-step="4">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "قواعد الأعمال" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode lane2 col2" data-id="lang" data-step="2A">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "تدقيق لغوي" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode lane2 col3" data-id="translation" data-step="3A">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "الترجمة" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode span-rows-2 col5 gate" data-id="approval" data-step="5">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "الاعتماد" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>

              <div class="pnode lane3 col4 post" data-id="qbank" data-step="Q">
                <div class="pnode__circle"></div>
                <div class="pnode__meta">
                  <div class="pnode__label">{% trans "بنك الأسئلة" %}</div>
                  <div class="pnode__status"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="pipeline-empty">{% trans "لا توجد إصدارات متاحة حالياً." %}</p>
    {% endif %}
  </div>
  {% endblock %}

  {% block extra_js %}
  {{ pipelines|json_script:"pipeline-data" }}
  {{ status_labels|json_script:"pipeline-status-labels" }}
  <script src="{% static 'js/pipeline.js' %}"></script>
  {% endblock %}
